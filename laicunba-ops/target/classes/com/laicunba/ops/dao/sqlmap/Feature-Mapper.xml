<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="FEATURE">

	<resultMap type="com.laicunba.ops.pojo.FeatureDO" id="map" extends="BASE.map">
		<result column="user_Case_Id" property="userCaseId" /> 
		<result column="feature_Id" property="featureId" /> 
		<result column="description" property="description" /> 
		<result column="feature_Name" property="featureName" /> 
		<result column="status" property="status" /> 
		<result column="type" property="type" /> 
		<result column="coder_Id" property="coderId" /> 
		<result column="designer_Id" property="designerId" /> 
		<result column="tester_Id" property="testerId" /> 
		<result column="pd_Id" property="pdId" /> 
		<result column="priority" property="priority" /> 
		<result column="finish_Test" property="finishTest" /> 
		<result column="finish_Coding" property="finishCoding" /> 
		<result column="finish_Design" property="finishDesign" /> 
		<result column="product_Version_Id" property="productVersionId" /> 
		
		 
	</resultMap>

	<select id="findByUserCaseId" resultMap="map" parameterType="map">
		SELECT
			ops_feature.*
		FROM
			ops_feature
		LEFT JOIN ops_user_case ON ops_user_case. ID = ops_feature.user_case_id
		where ops_user_case.id =#{userCaseId} and ops_feature.product_Version_Id=#{productVersionId}
	</select>

	<select id="findByProductVersionStatus" parameterType="string" resultType="map">
		SELECT
			ops_feature.* ,
		  ops_product.product_name,
		  ops_product_version.version_code,
		  ops_product_version.version_name,
		  ops_user_case.case_name,
  		  ops_product_version.status as version_status
		FROM
			ops_feature
		LEFT JOIN ops_user_case ON ops_user_case. ID = ops_feature.user_case_id
		LEFT JOIN ops_product_version ON ops_product_version. ID = ops_feature.product_version_id
		LEFT JOIN ops_product on ops_product.id = ops_product_version.product_id
		where ops_product_version.status = #{status}
	</select>
</mapper> 