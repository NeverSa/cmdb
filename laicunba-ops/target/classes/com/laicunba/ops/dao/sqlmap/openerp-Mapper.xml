<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="OPENERP">

	 

	<select id="findCarSheetByDate"  resultType="map" parameterType="map">
	select 
		x_car_sheet.id,
		x_car_sheet.x_time,
		x_car_sheet.x_price,
		x_car_sheet.x_times,
		x_car.x_name as car_name,
		x_start.x_name as start_name,
		x_end.x_name as end_name,
		x_start.id as start_id,
		x_end.id as end_id,
		x_car_sheet.x_price * x_car_sheet.x_times  as total_price,
		d1.x_name as d1_name,
		d2.x_name as d2_name,
		d3.x_name as d3_name
	from x_car_sheet 
		LEFT join x_car on x_car_sheet.x_car = x_car.id
		LEFT join x_start on x_car_sheet.x_start = x_start.id 
		left join x_end on x_car_sheet.x_end = x_end.id
		left join x_driver d1 on d1.id = x_car_sheet.x_driver
		left join x_driver d2 on d2.id = x_car_sheet.x_d2
		left join x_driver d3 on d3.id = x_car_sheet.x_d3
	where 
		x_car_sheet.x_time > to_date('%s','yyyy-MM-dd')
		and x_car_sheet.x_time &lt; to_date('%s','yyyy-MM-dd') 
	</select>
	
	
	<select id="findBaseData"  resultType="map" parameterType="map">
	 select id,x_name,x_num,'car' as type from x_car
	 UNION
	 select id,x_name,'','driver' as type from x_driver
	 union
	 select id,x_name,'','start' as type from x_start
	 union
	 select id,x_name,'','end' as type from x_end	
	</select>

</mapper> 